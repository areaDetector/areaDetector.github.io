<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>NDFileNexus &#8212; areaDetector R3-4-77-g51716e0 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/lbco_32.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NDFileMagick" href="NDFileMagick.html" />
    <link rel="prev" title="NDFileHDF5" href="NDFileHDF5.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          areaDetector</a>
        <span class="navbar-text navbar-version pull-left"><b>R3-4-77-g51716e0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#versions">Versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#licsense">Licsense</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#installing-and-building-from-source-code">Installing and Building from Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#downloading-and-installing-areadetector-source-code">Downloading and Installing areaDetector Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#installing-pre-built-binary-versions-of-areadetector">Installing Pre-Built Binary Versions of areaDetector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#display-managers">Display Managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#running-the-ioc-application">Running the IOC Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#image-viewers">Image Viewers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../detectors.html#commuinity-supported-detectors">Commuinity Supported Detectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detectors.html#areadetector-camera-drivers-supplied-by-3rd-parties">areaDetector camera drivers supplied by 3rd parties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../legacy_versions.html#required-modules">Required Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../legacy_versions.html#installation-and-building">Installation and Building</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="arch.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="asynPortDriver.html">asynPortDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="NDArray.html">NDArray</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detector_drivers.html">Detector Drivers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="plugins.html">areaDetector Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="medm.html">MEDM screens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADViewers/ad_viewers.html">areaDetector Viewers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acknowledgements.html">Acknowledgements and licenses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">NDFileNexus</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#screen-shots">Screen Shots</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="NDFileHDF5.html" title="Previous Chapter: NDFileHDF5"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; NDFileHDF5</span>
    </a>
  </li>
  <li>
    <a href="NDFileMagick.html" title="Next Chapter: NDFileMagick"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">NDFileMagick &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/ADCore/NDFileNexus.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="ndfilenexus">
<h1><a class="toc-backref" href="#id1">NDFileNexus</a><a class="headerlink" href="#ndfilenexus" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Mark Rivers</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#ndfilenexus" id="id1">NDFileNexus</a><ul>
<li><a class="reference internal" href="#overview" id="id2">Overview</a></li>
<li><a class="reference internal" href="#screen-shots" id="id3">Screen Shots</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id2">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>A plugin to write <a class="reference external" href="http://www.nexusformat.org/Main_Page">NeXus</a> files
was written by John Hammonds from the APS. NeXus is a standard format
for x-ray and neutron data based on <a class="reference external" href="http://www.hdfgroup.org">HDF</a>.
This is a very general file format, capable of storing any type of array
data and meta-data.</p>
<p>The <a class="reference external" href="../areaDetectorDoxygenHTML/class_n_d_file_nexus.html">NDFileNexus class
documentation</a>
describes this class in detail.</p>
<p>The NDFileNexus plugin is created with the <code class="docutils literal notranslate"><span class="pre">NDFileNexusConfigure</span></code> command,
either from C/C++ or from the EPICS IOC shell.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">NDFileNexusConfigure</span> <span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">portName</span><span class="p">,</span> <span class="kt">int</span> <span class="n">queueSize</span><span class="p">,</span> <span class="kt">int</span> <span class="n">blockingCallbacks</span><span class="p">,</span>
                      <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">NDArrayPort</span><span class="p">,</span> <span class="kt">int</span> <span class="n">NDArrayAddr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">maxMemory</span><span class="p">,</span>
                      <span class="kt">int</span> <span class="n">priority</span><span class="p">,</span> <span class="kt">int</span> <span class="n">stackSize</span><span class="p">)</span>
</pre></div>
</div>
<p>For details on the meaning of the parameters to this function refer to
the detailed documentation on the NDFileNexusConfigure function in the
<a class="reference external" href="../areaDetectorDoxygenHTML/_n_d_file_nexus_8cpp.html">NDFileNexus.cpp
documentation</a> and
in the documentation for the constructor for the <a class="reference external" href="../areaDetectorDoxygenHTML/class_n_d_file_nexus.html">NDFileNexus
class</a>.</p>
<p>NDFileNeXus uses 2 additional parameters to define the location of an
XML file that is read to determine the contents of the NeXus files
written by this plugin. These are described in the following table.</p>
<table class="table table-bordered">
  <tbody>
    <tr>
      <td align="center" colspan="7,">
        <b>Parameter Definitions in NDFileNexus.h and EPICS Record Definitions in NDFileNexus.template</b>
      </td>
    </tr>
    <tr>
      <th>
        Parameter index variable</th>
      <th>
        asyn interface</th>
      <th>
        Access</th>
      <th>
        Description</th>
      <th>
        drvInfo string</th>
      <th>
        EPICS record name</th>
      <th>
        EPICS record type</th>
    </tr>
    <tr>
      <td align="center" colspan="7,">
        <b>Location of XML file to configure NeXus file contents</b></td>
    </tr>
    <tr>
      <td>
        NDFileNexusTemplatePath</td>
      <td>
        asynOctet</td>
      <td>
        r/w</td>
      <td>
        Path to XML template file</td>
      <td>
        TEMPLATE_FILE_PATH</td>
      <td>
        $(P)$(R)TemplateFilePath<br />
        $(P)$(R)TemplateFilePath_RBV</td>
      <td>
        waveform<br />
        waveform</td>
    </tr>
    <tr>
      <td>
        NDFileNexusTemplateFile</td>
      <td>
        asynOctet</td>
      <td>
        r/w</td>
      <td>
        Name of XML template file</td>
      <td>
        TEMPLATE_FILE_NAME</td>
      <td>
        $(P)$(R)TemplateFileName<br />
        $(P)$(R)TemplateFileName_RBV</td>
      <td>
        waveform<br />
        waveform</td>
    </tr>
  </tbody>
</table><p>There is currently no documentation on the contents of the XML template
file. However, there are example XML template files in the
iocSimDetector and iocPerkinElmer directories. Documentation on the XML
file contents will be written ASAP. It is possible to validate most of
the syntax in a NeXus template XML file. For example, the command
(starting from the <code class="docutils literal notranslate"><span class="pre">iocBoot</span></code> directory) to validate the syntax of the
<code class="docutils literal notranslate"><span class="pre">iocBoot/iocSimDetector/NexusTemplate.xml</span></code> file is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>xmllint --noout --schematron ./template.sch iocSimDetector/NexusTemplate.xml
</pre></div>
</div>
<p>The prebuilt Linux libraries libhdf5.a and libNeXus.a are built with
HDF5 1.6.9. When they are built with the latest version, 1.8.2, they
require GLIBC version 2.7 or higher, i.e. /lib/libc-2.7.so or higher.
Since users may want to install areaDetector on older Linux systems
(which predate Fedora Core 8 for example), it was decided to use this
older version of HDF5. Future releases of areaDetector may use HDF5
1.8.2 or later, and hence not work with older Linux systems.</p>
</div>
<div class="section" id="screen-shots">
<h2><a class="toc-backref" href="#id3">Screen Shots</a><a class="headerlink" href="#screen-shots" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../_images/NDFileNexus.png" src="../_images/NDFileNexus.png" />
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Mark Rivers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>