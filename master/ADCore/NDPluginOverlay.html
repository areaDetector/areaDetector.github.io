<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>NDPluginOverlay &#8212; areaDetector 3-4-146-g1d45811 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon_t.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NDPluginProcess" href="NDPluginProcess.html" />
    <link rel="prev" title="NDPluginGather" href="NDPluginGather.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          areaDetector</a>
        <span class="navbar-text navbar-version pull-left"><b>3-4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#versions">Versions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-5-february-xxx-2018">R3-5 (February XXX, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-4-december-3-2018">R3-4 (December 3, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-2-july-9-2018">R3-3-2 (July 9, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-1-july-1-2018">R3-3-1 (July 1, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-june-27-2018">R3-3 (June 27, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-2-january-28-2018">R3-2 (January 28, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-1-july-3-2017">R3-1 (July 3, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-0-may-5-2017">R3-0 (May 5, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-6-february-22-2017">R2-6 (February 22, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-5-october-28-2016">R2-5 (October 28, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-4-september-18-2015">R2-4 (September 18, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-3-july-24-2015">R2-3 (July 24, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-2-march-23-2015">R2-2 (March 23, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-0-april-4-2014">R2-0 (April 4, 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r1-9-1-and-earlier">R1-9-1 and earlier</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#licsense">Licsense</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#installing-and-building-from-source-code">Installing and Building from Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#epics-products-required-for-building-areadetector">EPICS Products Required for Building areaDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#external-products-required-for-building-areadetector">External Products Required for Building areaDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#tiff-jpeg-xml2-and-z">TIFF, JPEG, XML2, and Z</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#hdf5-szip-and-graphics-magick">HDF5, SZIP, and GRAPHICS_MAGICK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#downloading-and-installing-areadetector-source-code">Downloading and Installing areaDetector Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#release-and-config-files">RELEASE* and CONFIG* files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-support-local">Edit RELEASE_SUPPORT.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#optionally-create-release-support-local-epics-host-arch">Optionally create RELEASE_SUPPORT.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#optionally-create-release-base-local-epics-host-arch">Optionally create RELEASE_BASE.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-libs-local">Edit RELEASE_LIBS.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-prods-local">Edit RELEASE_PRODS.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-config-site-local-and-optionally-config-site-local-epics-host-arch">Edit CONFIG_SITE.local and optionally CONFIG_SITE.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-local">Edit RELEASE.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#make">make</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#example-files-in-adcore-iocboot">Example files in ADCore/iocBoot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#run-simdetector">Run SimDetector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#installing-pre-built-binary-versions-of-areadetector">Installing Pre-Built Binary Versions of areaDetector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#display-managers">Display Managers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#medm">MEDM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edm">EDM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#css">CSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#caqtdm">caQtDM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#running-the-ioc-application">Running the IOC Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#image-viewers">Image Viewers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../detectors.html#commuinity-supported-detectors">Commuinity Supported Detectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detectors.html#areadetector-camera-drivers-supplied-by-3rd-parties">areaDetector camera drivers supplied by 3rd parties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../legacy_versions.html#required-modules">Required Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../legacy_versions.html#installation-and-building">Installation and Building</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="arch.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="asynPortDriver.html">asynPortDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="NDArray.html">NDArray</a><ul>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#id1">NDArray</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#ndarraypool">NDArrayPool</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#ndattribute">NDAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#ndattributelist">NDAttributeList</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#pvattribute">PVAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#paramattribute">paramAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#functattribute">functAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#asynndarraydriver">asynNDArrayDriver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../detector_drivers.html">Detector Drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ADDriver.html">ADDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="guidelines.html">Guidelines and rules for drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADFastCCD/index.html">areaDetector FastCCD driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADProsilica/ADProsilica.html">areaDetector Prosilica driver</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="plugins.html">areaDetector Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plugin_overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginDriver.html">NDPluginDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin_guidelines.html">Guidelines and rules for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin_medm.html">Base class medm screens</a></li>
<li class="toctree-l3"><a class="reference internal" href="common_plugins.html">commonPlugins.cmd</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin_performance.html">Performance example</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginAttrPlot.html">NDPluginAttrPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginAttribute.html">NDPluginAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginCircularBuff.html">NDPluginCircularBuff</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginCodec.html">NDPluginCodec</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginColorConvert.html">NDPluginColorConvert</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginFFT.html">NDPluginFFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginFile.html">NDPluginFile</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginGather.html">NDPluginGather</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">NDPluginOverlay</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginProcess.html">NDPluginProcess</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginPva.html">NDPluginPva</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginROI.html">NDPluginROI</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginROIStat.html">NDPluginROIStat</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginScatter.html">NDPluginScatter</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginStats.html">NDPluginStats</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginStdArrays.html">NDPluginStdArrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginTimeSeries.html">NDPluginTimeSeries</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginTransform.html">NDPluginTransform</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginPos.html">NDPosPlugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="ffmpegServer.html">ffmpegServer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="medm.html">MEDM screens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADViewers/ad_viewers.html">areaDetector Viewers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-viewers">ImageJ Viewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-controller-epics-ad-controller-java">ImageJ Controller (EPICS_AD_Controller.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-gaussian-profiler-gaussianprofiler-java">ImageJ Gaussian Profiler (GaussianProfiler.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#idl-viewer">IDL Viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../acknowledgements.html">Acknowledgements and licenses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">NDPluginOverlay</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#display-limits-for-position-and-size-fields">Display limits for Position and Size fields</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#screen-shots">Screen shots</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="NDPluginGather.html" title="Previous Chapter: NDPluginGather"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; NDPluginGather</span>
    </a>
  </li>
  <li>
    <a href="NDPluginProcess.html" title="Next Chapter: NDPluginProcess"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">NDPluginProcess &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/ADCore/NDPluginOverlay.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="ndpluginoverlay">
<h1><a class="toc-backref" href="#id2">NDPluginOverlay</a><a class="headerlink" href="#ndpluginoverlay" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Mark Rivers, University of Chicago</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#ndpluginoverlay" id="id2">NDPluginOverlay</a><ul>
<li><a class="reference internal" href="#overview" id="id3">Overview</a><ul>
<li><a class="reference internal" href="#display-limits-for-position-and-size-fields" id="id4">Display limits for Position and Size fields</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration" id="id5">Configuration</a></li>
<li><a class="reference internal" href="#screen-shots" id="id6">Screen shots</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id3">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>NDPluginOverlay adds graphics overlays to an NDArray image. It can be
used to highlight ROIs on an image, to implement cursors, add text
annotation, and other similar operations. It supports any number of
overlay objects. For each object there is control of the location, size,
line width, color, and drawing mode. The size, line width and location
can be directly controlled, or links can be used to control the position
and size from other PVs. For example, links to the PVs definining an ROI
in the NDPluginROI plugin can be used to define a rectangular overlay in
thus plugin. Similarly links to the PVs defining the X and Y centroid
and sigma of an image computed in the NDPluginStats plugin can be used
to control the location and size of a crosshair overlay in this plugin.
The cursor will then follow the location of a “beam” in the image.
Putting such graphics overlays into an areaDetector plugin allows the
use of simple image display clients, which don’t need to compute the
graphics themselves.</p>
<p>Each NDPluginOverlay plugin can contain any number of overlay objects,
each with a different shape, position, color, etc. The number of overlay
objects is defined when the NDPluginOverlay is created in the startup
script. Each object is referenced by its asyn “addr” address field.</p>
<p>NDPluginOverlay is both a <strong>recipient</strong> of callbacks and a <strong>source</strong> of
NDArray callbacks. This means that other plugins, such as the
NDPluginStdArray plugin, can be connected to an NDPluginOverlay plugin.
In that case an image display client will receive the arrays with the
graphics overlays.</p>
<p>NDPluginOverlay can only be used for 2-D arrays or 3-D color arrays, it
is not fully N-dimensional.</p>
<p>NDPluginOverlay inherits from NDPluginDriver. The <a class="reference external" href="../areaDetectorDoxygenHTML/class_n_d_plugin_overlay.html">NDPluginOverlay class
documentation</a>
describes this class in detail.</p>
<p>NDPluginOverlay.h defines the following parameters. It also implements
all of the standard plugin parameters from
<a class="reference internal" href="NDPluginDriver.html"><span class="doc">NDPluginDriver</span></a>. There are 2 EPICS
databases for the NDPluginOverlay plugin. NDOverlay.template provides
access to global parameters that are not specific to each overlay
object. There are currently no records in this database, because it
currently needs nothing beyond what is contained in
NDPluginBase.template, but there may be records added to this in the
future. NDOverlayN.template provides access to the parameters for each
individual overlay object, described in the following table. Note that
to reduce the width of this table the parameter index variable names
have been split into 2 lines, but these are just a single name, for
example <code class="docutils literal notranslate"><span class="pre">NDPluginOverlayName</span></code>.</p>
<table class="table table-bordered">
  <tbody>
    <tr>
      <td align="center" colspan="7,">
        <b>Parameter Definitions in NDPluginOverlay.h and EPICS Record Definitions in NDOverlayN.template</b>
      </td>
    </tr>
    <tr>
      <th>
        Parameter index variable</th>
      <th>
        asyn interface</th>
      <th>
        Access</th>
      <th>
        Description</th>
      <th>
        drvInfo string</th>
      <th>
        EPICS record name</th>
      <th>
        EPICS record type</th>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        Name</td>
      <td>
        asynOctet</td>
      <td>
        r/w</td>
      <td>
        Name for this overlay.</td>
      <td>
        NAME</td>
      <td>
        $(P)$(R)Name<br />
        $(P)$(R)Name_RBV</td>
      <td>
        stringout<br />
        stringin</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        Use</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        Flag indicating whether to use (enable) this overlay. 0=No, 1=Yes.</td>
      <td>
        USE</td>
      <td>
        $(P)$(R)Use<br />
        $(P)$(R)Use_RBV</td>
      <td>
        bo<br />
        bi</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        OverlayPositionX</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The X position of this overlay. This is the left edge of the overlay. This will
        automatically update if CenterX is changed.</td>
      <td>
        OVERLAY_POSITION_X</td>
      <td>
        $(P)$(R)PositionX<br />
        $(P)$(R)PositionX_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        N.A.</td>
      <td>
        N.A.</td>
      <td>
        r/w</td>
      <td>
        Link to fetch the desired X position of this overlay. The .DOL field of this record
        can be set to another record which will then change PositionX whenever the other
        record updates. The link <i>must</i> have the "CP" attribute, so that this record
        processes whenever the record it is linked to changes. For example, the link could
        be set to "13PS1:Stats1:CentroidX_RBV CP NMS" to fetch its position from the X centroid
        calculated by an NDPluginStats plugin, or to "13PS1:ROI1:MinX_RBV CP MS" to fetch
        its position from the X position of an ROI. If this link field is blank or points
        to a non-existent record then the X position of the overlay can be manually controlled.
        Note that this linking is done entirely in the EPICS database, and not in the plugin
        code.</td>
      <td>
        N.A.</td>
      <td>
        $(P)$(R)PositionXLink</td>
      <td>
        longout</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        OverlayPositionY</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The Y position of this overlay. This is the top edge of the overlay. This will automatically
        update if CenterY is changed.</td>
      <td>
        OVERLAY_POSITION_Y</td>
      <td>
        $(P)$(R)PositionY<br />
        $(P)$(R)PositionY_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        N.A.</td>
      <td>
        N.A.</td>
      <td>
        r/w</td>
      <td>
        Link to fetch the desired Y position of this overlay. See the notes for PositionXLink
        above.</td>
      <td>
        N.A.</td>
      <td>
        $(P)$(R)PositionYLink</td>
      <td>
        longout</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        OverlayCenterX</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The X position of the center of this overlay. Sometimes it is more convenient to
        specify the center of the overlay rather than the left edge. This will automatically
        update if CenterX or SizeX is changed.</td>
      <td>
        OVERLAY_CENTER_X</td>
      <td>
        $(P)$(R)CenterX<br />
        $(P)$(R)CenterX_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        N.A.</td>
      <td>
        N.A.</td>
      <td>
        r/w</td>
      <td>
        Link to fetch the desired X center of this overlay. See the notes for PositionXLink
        above.</td>
      <td>
        N.A.</td>
      <td>
        $(P)$(R)CenterXLink</td>
      <td>
        longout</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        OverlayCenterY</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The Y position of the center of this overlay. Sometimes it is more convenient to
        specify the center of the overlay rather than the top edge. This will automatically
        update if CenterY or SizeY is changed.</td>
      <td>
        OVERLAY_CENTER_Y</td>
      <td>
        $(P)$(R)CenterY<br />
        $(P)$(R)CenterY_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        N.A.</td>
      <td>
        N.A.</td>
      <td>
        r/w</td>
      <td>
        Link to fetch the desired Y center of this overlay. See the notes for PositionXLink
        above.</td>
      <td>
        N.A.</td>
      <td>
        $(P)$(R)CenterYLink</td>
      <td>
        longout</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        OverlaySizeX</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The X size of this overlay. This does not apply to Text overlay shapes.</td>
      <td>
        OVERLAY_SIZE_X</td>
      <td>
        $(P)$(R)SizeX<br />
        $(P)$(R)SizeX_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        N.A.</td>
      <td>
        N.A.</td>
      <td>
        r/w</td>
      <td>
        Link to fetch the desired X size of this overlay. See the notes for PositionXLink
        above.</td>
      <td>
        N.A.</td>
      <td>
        $(P)$(R)SizeXLink</td>
      <td>
        longout</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        OverlaySizeY</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The Y size of this overlay. This does not apply to Text overlay shapes.</td>
      <td>
        OVERLAY_SIZE_Y</td>
      <td>
        $(P)$(R)SizeY<br />
        $(P)$(R)SizeY_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        N.A.</td>
      <td>
        N.A.</td>
      <td>
        r/w</td>
      <td>
        Link to fetch the desired Y size of this overlay. See the notes for PositionXLink
        above.</td>
      <td>
        N.A.</td>
      <td>
        $(P)$(R)SizeYLink</td>
      <td>
        longout</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        OverlayWidthX</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The X line width of this overlay. For the cross overlay this will increase the width
        of the line on both sides at the same time, to maintain the central point of the
        cross. For the rectangle and ellipse overlays the line thickness will grow inwards
        to the center. For cross overlay shapes the widths &gt;1 are restricted to even
        numbers; odd widths &gt;1 are decreased by 1.</td>
      <td>
        OVERLAY_WIDTH_X</td>
      <td>
        $(P)$(R)WidthX<br />
        $(P)$(R)WidthX_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        N.A.</td>
      <td>
        N.A.</td>
      <td>
        r/w</td>
      <td>
        Link to fetch the desired X line width of this overlay. See the notes for PositionXLink
        above.</td>
      <td>
        N.A.</td>
      <td>
        $(P)$(R)WidthXLink</td>
      <td>
        longout</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        OverlayWidthY</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The Y line width of this overlay. This behaves in the same way as the OverlayWidthX.
      </td>
      <td>
        OVERLAY_WIDTH_Y</td>
      <td>
        $(P)$(R)WidthY<br />
        $(P)$(R)WidthY_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        N.A.</td>
      <td>
        N.A.</td>
      <td>
        r/w</td>
      <td>
        Link to fetch the desired Y line width of this overlay. See the notes for PositionXLink
        above.</td>
      <td>
        N.A.</td>
      <td>
        $(P)$(R)WidthYLink</td>
      <td>
        longout</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        Shape</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The shape of this overlay. Choices are:
        <ul>
          <li>0="Cross"</li>
          <li>1="Rectangle"</li>
          <li>2="Text"</li>
          <li>3="Ellipse"</li>
        </ul>
        Other shapes may be added in the future. </td>
      <td>
        OVERLAY_SHAPE</td>
      <td>
        $(P)$(R)Shape<br />
        $(P)$(R)Shape_RBV</td>
      <td>
        mbbo<br />
        mbbi</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        DrawMode</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The operation to use when drawing this overlay. Choices are:
        <ul>
          <li>0="Set"</li>
          <li>1="XOR"</li>
        </ul>
        In Set mode the Red, Green, and Blue values (Green for mono images) are written
        directly into the pixel values. In XOR mode the value in the pixel is XOR'ed with
        the Red, Green, and Blue values. XOR operation typically results in an overlay that
        has better visibility no matter what the values of the surrounding pixels, while
        Set mode with Green=255, for example, will show up well on dark areas of the image,
        but will be hard to see in bright areas of the image. Note that XOR is not supported
        for NDFloat32 or NDFloat64 data types directly, but they are cast to int if XOR
        is selected for arrays with those data types.</td>
      <td>
        OVERLAY_DRAW_MODE</td>
      <td>
        $(P)$(R)DrawMode<br />
        $(P)$(R)DrawMode_RBV</td>
      <td>
        mbbo<br />
        mbbi</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        Red</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The red value to use when drawing the overlay. This is only used for color images.
      </td>
      <td>
        OVERLAY_RED</td>
      <td>
        $(P)$(R)Red<br />
        $(P)$(R)Red_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        Green</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The green value to use when drawing the overlay. This is the value that is used
        for monochrome images as well.</td>
      <td>
        OVERLAY_GREEN</td>
      <td>
        $(P)$(R)Green<br />
        $(P)$(R)Green_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        Blue</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The blue value to use when drawing the overlay. This is only used for color images.
      </td>
      <td>
        OVERLAY_BLUE</td>
      <td>
        $(P)$(R)Blue<br />
        $(P)$(R)Blue_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        DisplayText</td>
      <td>
        asynOctet</td>
      <td>
        r/w</td>
      <td>
        The text string to write for this overlay if Shape="Text". </td>
      <td>
        OVERLAY_DISPLAY_TEXT</td>
      <td>
        $(P)$(R)DisplayText<br />
        $(P)$(R)DisplayText_RBV</td>
      <td>
        waveform<br />
        waveform</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        TimeStampFormat</td>
      <td>
        asynOctet</td>
      <td>
        r/w</td>
      <td>
        The format string to use when outputting the EPICS time stamp (epicsTS) field of
        the NDArray in the text overlay. Default="%Y-%m-%d %H:%M:%S.%03f". Any of the components
        of the format can be omitted to suppress the display of that field. </td>
      <td>
        OVERLAY_TIMESTAMP_FORMAT</td>
      <td>
        $(P)$(R)TimeStampFormat<br />
        $(P)$(R)TimeStampFormat_RBV</td>
      <td>
        stringout<br />
        stringin</td>
    </tr>
    <tr>
      <td>
        NDPluginOverlay<br />
        Font</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The font to use for the text display. Choices are:
        <ul>
          <li>0="6x13"</li>
          <li>1="6x13 Bold"</li>
          <li>2="9x15"</li>
          <li>3="9x15 Bold"</li>
        </ul>
      </td>
      <td>
        OVERLAY_FONT</td>
      <td>
        $(P)$(R)Font<br />
        $(P)$(R)Font_RBV</td>
      <td>
        mbbo<br />
        mbbi</td>
    </tr>
  </tbody>
</table><div class="section" id="display-limits-for-position-and-size-fields">
<h3><a class="toc-backref" href="#id4">Display limits for Position and Size fields</a><a class="headerlink" href="#display-limits-for-position-and-size-fields" title="Permalink to this headline">¶</a></h3>
<p>It is very convenient to have slider widgets to control the size and
position of user-defined overlays. For these to work correctly, the HOPR
fields of the X and Y position and size widgets must be set to the
maximum allowed values. This is handled in the NDOverlay.template
database, where the HOPR fields are automatically set to the actual size
of the input array whenever that changes. Note that if HOPR changes,
then with medm it is necessary to close and reopen the display with the
sliders, because medm only retrieves the value the display limits when
it first connects to a channel.</p>
</div>
</div>
<div class="section" id="configuration">
<span id="id1"></span><h2><a class="toc-backref" href="#id5">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The NDPluginOverlay plugin is created with the NDOverlayConfigure
command, either from C/C++ or from the EPICS IOC shell.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NDOverlayConfigure(const char *portName, int queueSize, int blockingCallbacks,
                   const char *NDArrayPort, int NDArrayAddr, int maxOverlays,
                   int maxBuffers, size_t maxMemory,
                   int priority, int stackSize)
</pre></div>
</div>
<p>For details on the meaning of the parameters to this function refer to
the detailed documentation on the NDOverlayConfigure function in the
<a class="reference external" href="../areaDetectorDoxygenHTML/_n_d_plugin_overlay_8cpp.html">NDPluginOverlay.cpp
documentation</a>
and in the documentation for the constructor for the <a class="reference external" href="../areaDetectorDoxygenHTML/class_n_d_plugin_attribute.html">NDPluginOverlay
class</a>.</p>
</div>
<div class="section" id="screen-shots">
<span id="screens"></span><h2><a class="toc-backref" href="#id6">Screen shots</a><a class="headerlink" href="#screen-shots" title="Permalink to this headline">¶</a></h2>
<p>The following is the MEDM screen that provides access to the parameters
in NDPluginDriver.h and NDPluginOverlay.h through records in
NDPluginBase.template and NDOverlay.template. This screen does not
provide anything beyond the PVs in NDPluginBase.template except for the
menus to call up the related displays.</p>
<img alt="../_images/NDOverlay.png" class="align-center" src="../_images/NDOverlay.png" />
<p>The following is the MEDM screen that provides access to the parameters
in NDPluginOverlay.h through records in NDOverlayN.template. This allows
control of the parameters of a single overlay object.</p>
<img alt="../_images/NDOverlayN.png" class="align-center" src="../_images/NDOverlayN.png" />
<p>The following is the MEDM screen that provides control of most the
parameters of 8 overlay objects, and a link to the screen above for each
one.</p>
<img alt="../_images/NDOverlay8.png" class="align-center" src="../_images/NDOverlay8.png" />
<p>Image display from ImageJ where the cursor is set to track the centroid
of a laser pointer via its X and Y center input links from the
NDPluginStats plugin.</p>
<img alt="../_images/NDOverlay_image.jpg" class="align-center" src="../_images/NDOverlay_image.jpg" />
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Mark Rivers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>