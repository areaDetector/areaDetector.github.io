<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>NDPluginDriver &#8212; areaDetector 3-4-146-g1d45811 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon_t.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Guidelines and rules for plugins" href="plugin_guidelines.html" />
    <link rel="prev" title="Overview" href="plugin_overview.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          areaDetector</a>
        <span class="navbar-text navbar-version pull-left"><b>3-4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#versions">Versions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-5-february-xxx-2018">R3-5 (February XXX, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-4-december-3-2018">R3-4 (December 3, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-2-july-9-2018">R3-3-2 (July 9, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-1-july-1-2018">R3-3-1 (July 1, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-june-27-2018">R3-3 (June 27, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-2-january-28-2018">R3-2 (January 28, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-1-july-3-2017">R3-1 (July 3, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-0-may-5-2017">R3-0 (May 5, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-6-february-22-2017">R2-6 (February 22, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-5-october-28-2016">R2-5 (October 28, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-4-september-18-2015">R2-4 (September 18, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-3-july-24-2015">R2-3 (July 24, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-2-march-23-2015">R2-2 (March 23, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-0-april-4-2014">R2-0 (April 4, 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r1-9-1-and-earlier">R1-9-1 and earlier</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#licsense">Licsense</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#installing-and-building-from-source-code">Installing and Building from Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#epics-products-required-for-building-areadetector">EPICS Products Required for Building areaDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#external-products-required-for-building-areadetector">External Products Required for Building areaDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#tiff-jpeg-xml2-and-z">TIFF, JPEG, XML2, and Z</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#hdf5-szip-and-graphics-magick">HDF5, SZIP, and GRAPHICS_MAGICK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#downloading-and-installing-areadetector-source-code">Downloading and Installing areaDetector Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#release-and-config-files">RELEASE* and CONFIG* files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-support-local">Edit RELEASE_SUPPORT.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#optionally-create-release-support-local-epics-host-arch">Optionally create RELEASE_SUPPORT.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#optionally-create-release-base-local-epics-host-arch">Optionally create RELEASE_BASE.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-libs-local">Edit RELEASE_LIBS.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-prods-local">Edit RELEASE_PRODS.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-config-site-local-and-optionally-config-site-local-epics-host-arch">Edit CONFIG_SITE.local and optionally CONFIG_SITE.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-local">Edit RELEASE.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#make">make</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#example-files-in-adcore-iocboot">Example files in ADCore/iocBoot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#run-simdetector">Run SimDetector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#installing-pre-built-binary-versions-of-areadetector">Installing Pre-Built Binary Versions of areaDetector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#display-managers">Display Managers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#medm">MEDM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edm">EDM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#css">CSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#caqtdm">caQtDM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#running-the-ioc-application">Running the IOC Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#image-viewers">Image Viewers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../detectors.html#commuinity-supported-detectors">Commuinity Supported Detectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detectors.html#areadetector-camera-drivers-supplied-by-3rd-parties">areaDetector camera drivers supplied by 3rd parties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../legacy_versions.html#required-modules">Required Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../legacy_versions.html#installation-and-building">Installation and Building</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="arch.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="asynPortDriver.html">asynPortDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="NDArray.html">NDArray</a><ul>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#id1">NDArray</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#ndarraypool">NDArrayPool</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#ndattribute">NDAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#ndattributelist">NDAttributeList</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#pvattribute">PVAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#paramattribute">paramAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#functattribute">functAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDArray.html#asynndarraydriver">asynNDArrayDriver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../detector_drivers.html">Detector Drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ADDriver.html">ADDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="guidelines.html">Guidelines and rules for drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADFastCCD/index.html">areaDetector FastCCD driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADProsilica/ADProsilica.html">areaDetector Prosilica driver</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="plugins.html">areaDetector Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plugin_overview.html">Overview</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">NDPluginDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin_guidelines.html">Guidelines and rules for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin_medm.html">Base class medm screens</a></li>
<li class="toctree-l3"><a class="reference internal" href="common_plugins.html">commonPlugins.cmd</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin_performance.html">Performance example</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginAttrPlot.html">NDPluginAttrPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginAttribute.html">NDPluginAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginCircularBuff.html">NDPluginCircularBuff</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginCodec.html">NDPluginCodec</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginColorConvert.html">NDPluginColorConvert</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginFFT.html">NDPluginFFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginFile.html">NDPluginFile</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginGather.html">NDPluginGather</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginOverlay.html">NDPluginOverlay</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginProcess.html">NDPluginProcess</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginPva.html">NDPluginPva</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginROI.html">NDPluginROI</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginROIStat.html">NDPluginROIStat</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginScatter.html">NDPluginScatter</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginStats.html">NDPluginStats</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginStdArrays.html">NDPluginStdArrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginTimeSeries.html">NDPluginTimeSeries</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginTransform.html">NDPluginTransform</a></li>
<li class="toctree-l3"><a class="reference internal" href="NDPluginPos.html">NDPosPlugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="ffmpegServer.html">ffmpegServer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="medm.html">MEDM screens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADViewers/ad_viewers.html">areaDetector Viewers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-viewers">ImageJ Viewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-controller-epics-ad-controller-java">ImageJ Controller (EPICS_AD_Controller.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-gaussian-profiler-gaussianprofiler-java">ImageJ Gaussian Profiler (GaussianProfiler.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#idl-viewer">IDL Viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../acknowledgements.html">Acknowledgements and licenses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">NDPluginDriver</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="plugin_overview.html" title="Previous Chapter: Overview"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Overview</span>
    </a>
  </li>
  <li>
    <a href="plugin_guidelines.html" title="Next Chapter: Guidelines and rules for plugins"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Guidelines an... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/ADCore/NDPluginDriver.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="ndplugindriver">
<h1>NDPluginDriver<a class="headerlink" href="#ndplugindriver" title="Permalink to this headline">¶</a></h1>
<p>NDPluginDriver inherits from
<a class="reference external" href="areaDetectorDoc.html#asynNDArrayDriver">asynNDArrayDriver</a>.
NDPluginDriver is the class from which actual plugins are directly
derived. The EPICS database NDArrayBase.template provides access to each
of the parameters defined in asynNDArrayDriver, and the
<a class="reference external" href="areaDetectorDoc.html#asynNDArrayDriver">asynNDArrayDriver</a>
documentation describes that database. The NDPluginDriver class handles
most of the details of processing NDArray callbacks from the driver.
Plugins derived from this class typically need to implement the
processCallbacks method, and one or more of the write(Int32, Float64,
Octet) methods. The <a class="reference external" href="../areaDetectorDoxygenHTML/class_n_d_plugin_driver.html">NDPluginDriver class
documentation</a>
describes this class in detail.</p>
<p>NDPluginDriver defines parameters that all plugin drivers should
implement if possible. These parameters are defined by strings (drvInfo
strings in asyn) with an associated asyn interface, and access
(read-only or read-write). The EPICS database NDPluginBase.template
provides access to these standard plugin parameters, listed in the
following table. Note that to reduce the width of this table the
parameter index variable names have been split into 2 lines, but these
are just a single name, for example <code class="docutils literal notranslate"><span class="pre">NDPluginDriverArrayPort</span></code>.</p>
<table class="table table-bordered">
  <tbody>
    <tr>
      <td align="center" colspan="7,">
        <b>Parameter Definitions in NDPluginDriver.h and EPICS Record Definitions in NDPluginBase.template</b>
      </td>
    </tr>
    <tr>
      <th>
        Parameter index variable
      </th>
      <th>
        asyn interface
      </th>
      <th>
        Access
      </th>
      <th>
        Description
      </th>
      <th>
        drvInfo string
      </th>
      <th>
        EPICS record name
      </th>
      <th>
        EPICS record type
      </th>
    </tr>
    <tr>
      <td align="center" colspan="7,">
        <b>Information about this plugin</b></td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        PluginType</td>
      <td>
        asynOctet</td>
      <td>
        r/o</td>
      <td>
        A string describing the plugin type.</td>
      <td>
        PLUGIN_TYPE</td>
      <td>
        $(P)$(R)PluginType_RBV</td>
      <td>
        stringin</td>
    </tr>
    <tr>
      <td align="center" colspan="7,">
        <b>asyn NDArray driver doing callbacks to this plugin</b></td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        ArrayPort</td>
      <td>
        asynOctet</td>
      <td>
        r/w</td>
      <td>
        asyn port name for NDArray driver that will make callbacks to this plugin. This
        port can be changed at run time, connecting the plugin to a different NDArray driver.
      </td>
      <td>
        NDARRAY_PORT</td>
      <td>
        $(P)$(R)NDArrayPort<br />
        (P)$(R)NDArrayPort_RBV</td>
      <td>
        stringout<br />
        stringin</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        ArrayAddr</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        asyn port address for NDArray driver that will make callbacks to this plugin. This
        address can be changed at run time, connecting the plugin to a different address
        in the NDArray driver.</td>
      <td>
        NDARRAY_ADDR</td>
      <td>
        $(P)$(R)NDArrayAddress<br />
        $(P)$(R)NDArrayAddress_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td align="center" colspan="7,">
        <b>Queue size and status</b></td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        QueueSize</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The total queue size for callbacks when BlockingCallbacks=0. This can be changed
        at run time to increase or decrease the size of the queue and thus the buffering
        in this plugin. This changes the memory requirements of the plugin. When the queue
        size is changed the plugin temporarily stops the callbacks from the input driver
        and waits for all NDArrays currently in the queue to process.</td>
      <td>
        QUEUE_SIZE</td>
      <td>
        $(P)$(R)QueueSize<br />
        $(P)$(R)QueueSize_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        QueueFree</td>
      <td>
        asynInt32</td>
      <td>
        r/o</td>
      <td>
        The number of free queue elements. This record goes into minor alarm when the queue
        is 75% full and major alarm when the queue is 100% full.</td>
      <td>
        QUEUE_FREE</td>
      <td>
        $(P)$(R)QueueFree</td>
      <td>
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        QueueUse</td>
      <td>
        N/A</td>
      <td>
        r/o</td>
      <td>
        The number of used queue elements.</td>
      <td>
        N/A</td>
      <td>
        $(P)$(R)QueueUse</td>
      <td>
        calc</td>
    </tr>
    <tr>
      <td align="center" colspan="7,">
        <b>Number of threads</b></td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        MaxThreads</td>
      <td>
        asynInt32</td>
      <td>
        r/o</td>
      <td>
        The maximum number of threads that this plugin is allowed to use. This is defined
        when the plugin is created, and cannot be changed at run-time. Note that some plugins
        are not thread-safe for multiple threads running in the same plugin object, and
        these must force MaxThreads=1.</td>
      <td>
        MAX_THREADS</td>
      <td>
        $(P)$(R)MaxThreads_RBV</td>
      <td>
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        NumThreads</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The number of threads to use for this plugin. The value must be between 1 and MaxThreads.
      </td>
      <td>
        NUM_THREADS</td>
      <td>
        $(P)$(R)NumThreads<br />
        $(P)$(R)NumThreads_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td align="center" colspan="7,">
        <b>Sorting of output NDArrays</b></td>
    </tr>
    <tr>
      <td colspan="7,">
        When using a plugin with multiple threads, or when the input plugin is NDPluginGather
        it is likely that the NDArray output will be slightly out of order, i.e. NDArray::uniqueId
        fields will not be monotonically increasing. This is because the threads are running
        asynchronously and at slightly different speeds.&nbsp; As a consequence a file plugin
        downstream of this plugin would write NDArrays to the file in the "wrong" order.
        Plugins have an option to sort the NDArrays by uniqueId to attempt to output them
        in the correct order. This sorting option is enabled by setting SortMode=Sorted,
        and works using the following algorithm:
        <ul>
          <li>An std::multiset object is created to store the NDArray output pointers as they
            are received in NDArrayDriver::doNDArrayCallbacks. This is the method that all derived
            classes must call to output NDArrays to downstream plugins. This std::multiset also
            stores the time at which each NDArray was received by the NDArrayDriver::doNDArrayCallbacks
            method. This multiset is automatically sorted by the uniqueId of each NDArray.</li>
          <li>A worker thread is created which processes at the time interval specified by SortTime.
            This thread outputs the next array (NDArray[N]) in the multiset if any of the following
            are true:
            <ul>
              <li>NDArray[N].uniqueId = NDArray[N-1].uniqueId. This allows for the case where multiple
                upstream plugins are processing the same NDArray. This may happen, for example,
                if NDPluginGather is being used and not all of its inputs are getting their NDArrays
                from from NDPluginScatter.</li>
              <li>NDArray[N].uniqueId = NDArray[N-1].uniqueId + 1. This is the normal case.</li>
              <li>NDArray[N] has been in the multiset for longer than SortTime. This will be the
                case if the next array that <i>should</i> have been output has not arrived, perhaps
                because it has been dropped by some upstream plugin and will never arrive. Increasing
                the SortTime will allow longer for out of order arrays to arrive, at the expense
                of more memory because the multiset will grow larger before outputting the arrays.</li>
            </ul>
          </li>
        </ul>
        When NDArrays are added to the multiset they have their reference count increased,
        and so will still be consuming memory. The multiset is limited in size to SortSize.
        If the multiset would grow larger than this because arrays are arriving faster than
        they are being removed with the specified SortTime, then they will be dropped in
        the same manner as when NDArrays are dropped from the normal input queue. In this
        case DroppedOutputArrays will be incremented. Note that because NDArrays can be
        stored in both the normal input queue and the multiset the total memory potentially
        used by the plugin is determined by both QueueSize and SortSize.<br />
        If the plugin is receiving 500 NDArrays/s (2 ms period), and the maximum time the
        plugin threads require to execute is 20 msec, then the minimum value of SortTime
        should be 0.02 sec, and the minimum value of SortSize would be 10. It is a good
        idea to add a safety margin to these values, so perhaps SortSize=50 and SortTime=0.04
        sec.</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        SortMode</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        Selects whether the plugin outputs NDArrays in the order in which they arrive (Unsorted=1)
        or sorted by UniqueId (Sorted=1).</td>
      <td>
        SORT_MODE</td>
      <td>
        $(P)$(R)SortMode<br />
        $(P)$(R)SortMode_RBV</td>
      <td>
        mbbo<br />
        mbbi</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        SortTime</td>
      <td>
        asynFloat64</td>
      <td>
        r/w</td>
      <td>
        Sets the minimum time that the plugin will wait for preceeding arrays to arrive
        before outputting array N when SortMode=Sorted.</td>
      <td>
        SORT_TIME</td>
      <td>
        $(P)$(R)SortTime<br />
        $(P)$(R)SortTime_RBV</td>
      <td>
        ao<br />
        ai</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        SortSize</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The maximum allowed size of the std::multiset. This can be changed at run time to
        increase or decrease the size of the queue and thus the buffering in this plugin.
        This changes the memory requirements of the plugin.</td>
      <td>
        SORT_SIZE</td>
      <td>
        $(P)$(R)SortSize<br />
        $(P)$(R)SortSize_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        SortFree</td>
      <td>
        asynInt32</td>
      <td>
        r/o</td>
      <td>
        The number of NDArrays remaining before the std::multiset will not be allowed to
        grow larger and the plugin may begin to drop output frames.</td>
      <td>
        SORT_FREE</td>
      <td>
        $(P)$(R)SortFree</td>
      <td>
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        DisorderedArrays</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        The number of NDArrays that have been output in the "wrong" order. The definition
        of the wrong order for NDArray[N] is that NDArray[N].uniqueId=NDArray[N-1].uniqueId
        or NDArray[N].uniqueId=NDArray[N-1].uniqueId+1. The reason for the equality test
        is explained above.</td>
      <td>
        DISORDERED_ARRAYS</td>
      <td>
        $(P)$(R)DisorderedArrays<br />
        $(P)$(R)DisorderedArrays_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        DroppedOutputArrays</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        Counter that increments by 1 each time an NDArray callback occurs when SortMode=1
        and the std::multiset is full (SortFree=0), so the NDArray cannot be added to the
        std::multiset.</td>
      <td>
        DROPPED_OUTPUT_ARRAYS</td>
      <td>
        $(P)$(R)DroppedOutputArrays<br />
        $(P)$(R)DroppedOutputArrays_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td align="center" colspan="7,">
        <b>Callback enable, throttling, and statistics</b></td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        EnableCallbacks</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        Enable (1) or disable (0) callbacks from the driver to this plugin. If callbacks
        are disabled then the plugin will normally be idle and consume no CPU resources.
        When disabling the plugin it will continue to process any NDArrays that are already
        in the queue. </td>
      <td>
        ENABLE_CALLBACKS</td>
      <td>
        $(P)$(R)EnableCallbacks<br />
        $(P)$(R)EnableCallbacks_RBV</td>
      <td>
        bo<br />
        bi</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        BlockingCallbacks</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        0 = callbacks from the driver do not block; the NDArray data is put on a queue and
        the callback processes in one of the plugin threads.
        <br />
        1 = callbacks from the driver block; the callback processes in the driver callback
        thread.</td>
      <td>
        BLOCKING_CALLBACKS</td>
      <td>
        $(P)$(R)BlockingCallbacks<br />
        $(P)$(R)BlockingCallbacks_RBV</td>
      <td>
        bo<br />
        bi</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        ProcessPlugin</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        NDPluginDriver maintains a pointer to the last NDArray that the plugin received.
        If the ProcessPlugin record is processed then the plugin runs again using this same
        NDArray. This can be used to change the plugin parameters and observe the effects
        on downstream plugins and image viewers without requiring the underlying detector
        to collect another NDArray. When the plugin is disabled the cached NDArray is released
        back to the NDArrayPool.</td>
      <td>
        PROCESS_PLUGIN</td>
      <td>
        $(P)$(R)ProcessPlugin</td>
      <td>
        bo</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        ExecutionTime</td>
      <td>
        asynFloat64</td>
      <td>
        r/o</td>
      <td>
        The execution time when the plugin processes. This is useful for measuring the performance
        of the plugin</td>
      <td>
        EXECUTION_TIME</td>
      <td>
        $(P)$(R)ExecutionTime_RBV</td>
      <td>
        ai</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        MinCallbackTime</td>
      <td>
        asynFloat64</td>
      <td>
        r/w</td>
      <td>
        The minimum time in seconds between calls to processCallbacks. Any callbacks occuring
        before this minimum time has elapsed will be ignored. 0 means no minimum time, i.e.
        process all callbacks.</td>
      <td>
        MIN_CALLBACK_TIME</td>
      <td>
        $(P)$(R)MinCallbackTime<br />
        $(P)$(R)MinCallbackTime_RBV</td>
      <td>
        ao<br />
        ai</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        MaxByteRate</td>
      <td>
        asynFloat64</td>
      <td>
        r/w</td>
      <td>
        The maximum data output rate in bytes/s. If the output rate would exceed this then
        the output array is dropped and DroppedOutputArrays is incremented. This can be
        useful, for example, to limit the network bandwidth from a plugin. For most plugins
        this logic is implemented in NDPluginDriver::endProcessCallbacks() when the plugin
        is finishing its operation and is doing callbacks to any downstream plugins. However,
        the NDPluginPva and NDPluginStdArrays plugins are treated differently because the
        output we generally want to throttle is not the NDArray passed to downstream plugins,
        but rather the size of the output for the pvaServer (NDPluginPva) or the size of
        the arrays passed back to device support for waveform records (NDPluginStdArrays).
        For these plugins the throttling logic is thus also implemented inside the plugin.
        If these plugins are throttled then they really do no useful work, and so ArrayCounter
        is not incremented. This makes the ArrayRate reflect the rate at which the plugin
        is actually doing useful work. For NDPluginStdArrays this is also important because
        clients (e.g. ImageJ) may monitor the ArrayCounter_RBV field to decide when to read
        the array and update the display.</td>
      <td>
        MAX_BYTE_RATE</td>
      <td>
        $(P)$(R)MaxByteRate<br />
        $(P)$(R)MaxByteRate_RBV</td>
      <td>
        ao<br />
        ai</td>
    </tr>
    <tr>
      <td>
        NDPluginDriver<br />
        DroppedArrays</td>
      <td>
        asynInt32</td>
      <td>
        r/w</td>
      <td>
        Counter that increments by 1 each time an NDArray callback occurs when NDPluginDriverBlockingCallbacks=0
        and the plugin driver queue is full, so the callback cannot be processed.</td>
      <td>
        DROPPED_ARRAYS</td>
      <td>
        $(P)$(R)DroppedArrays<br />
        $(P)$(R)DroppedArrays_RBV</td>
      <td>
        longout<br />
        longin</td>
    </tr>
    <tr>
      <td align="center" colspan="7,">
        <b>Debugging control</b></td>
    </tr>
    <tr>
      <td>
        N/A</td>
      <td>
        N/A</td>
      <td>
        N/A</td>
      <td>
        N/A</td>
      <td>
        $(P)$(R)AsynIO</td>
      <td>
        asyn</td>
    </tr>
  </tbody>
</table></div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Mark Rivers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>