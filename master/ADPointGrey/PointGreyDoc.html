<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Point Grey areaDetector driver &#8212; areaDetector 3-4-193-gc8b0f4b documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon_t.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="areaDetector Plugins" href="../ADCore/plugins.html" />
    <link rel="prev" title="Example st.cmd Startup File" href="../ADProsilica/st_cmd.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          areaDetector</a>
        <span class="navbar-text navbar-version pull-left"><b>3-4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#versions">Versions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-5-february-xxx-2018">R3-5 (February XXX, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-4-december-3-2018">R3-4 (December 3, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-2-july-9-2018">R3-3-2 (July 9, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-1-july-1-2018">R3-3-1 (July 1, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-3-june-27-2018">R3-3 (June 27, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-2-january-28-2018">R3-2 (January 28, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-1-july-3-2017">R3-1 (July 3, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r3-0-may-5-2017">R3-0 (May 5, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-6-february-22-2017">R2-6 (February 22, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-5-october-28-2016">R2-5 (October 28, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-4-september-18-2015">R2-4 (September 18, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-3-july-24-2015">R2-3 (July 24, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-2-march-23-2015">R2-2 (March 23, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r2-0-april-4-2014">R2-0 (April 4, 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release.html#r1-9-1-and-earlier">R1-9-1 and earlier</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Install Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#licsense">Licsense</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#installing-and-building-from-source-code">Installing and Building from Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#epics-products-required-for-building-areadetector">EPICS Products Required for Building areaDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#external-products-required-for-building-areadetector">External Products Required for Building areaDetector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#tiff-jpeg-xml2-and-z">TIFF, JPEG, XML2, and Z</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#hdf5-szip-and-graphics-magick">HDF5, SZIP, and GRAPHICS_MAGICK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#downloading-and-installing-areadetector-source-code">Downloading and Installing areaDetector Source Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#release-and-config-files">RELEASE* and CONFIG* files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-support-local">Edit RELEASE_SUPPORT.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#optionally-create-release-support-local-epics-host-arch">Optionally create RELEASE_SUPPORT.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#optionally-create-release-base-local-epics-host-arch">Optionally create RELEASE_BASE.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-libs-local">Edit RELEASE_LIBS.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-prods-local">Edit RELEASE_PRODS.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-config-site-local-and-optionally-config-site-local-epics-host-arch">Edit CONFIG_SITE.local and optionally CONFIG_SITE.local.$(EPICS_HOST_ARCH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edit-release-local">Edit RELEASE.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#make">make</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#example-files-in-adcore-iocboot">Example files in ADCore/iocBoot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#run-simdetector">Run SimDetector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#installing-pre-built-binary-versions-of-areadetector">Installing Pre-Built Binary Versions of areaDetector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#display-managers">Display Managers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#medm">MEDM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#edm">EDM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#css">CSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install_guide.html#caqtdm">caQtDM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#running-the-ioc-application">Running the IOC Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install_guide.html#image-viewers">Image Viewers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../detectors.html">Supported Detectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../detectors.html#commuinity-supported-detectors">Commuinity Supported Detectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../detectors.html#areadetector-camera-drivers-supplied-by-3rd-parties">areaDetector camera drivers supplied by 3rd parties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../legacy_versions.html">Legacy Versions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../legacy_versions.html#required-modules">Required Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../legacy_versions.html#installation-and-building">Installation and Building</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ADCore/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/arch.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/asynPortDriver.html">asynPortDriver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/NDArray.html">NDArray</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDArray.html#id1">NDArray</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDArray.html#ndarraypool">NDArrayPool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDArray.html#ndattribute">NDAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDArray.html#ndattributelist">NDAttributeList</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDArray.html#pvattribute">PVAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDArray.html#paramattribute">paramAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDArray.html#functattribute">functAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDArray.html#asynndarraydriver">asynNDArrayDriver</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../detector_drivers.html">Detector Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ADCore/ADDriver.html">ADDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/guidelines.html">Guidelines and rules for drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADFastCCD/index.html">areaDetector FastCCD driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADProsilica/ADProsilica.html">areaDetector Prosilica driver</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Point Grey areaDetector driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/plugins.html">areaDetector Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/plugin_overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginDriver.html">NDPluginDriver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/plugin_guidelines.html">Guidelines and rules for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/plugin_medm.html">Base class medm screens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/common_plugins.html">commonPlugins.cmd</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/plugin_performance.html">Performance example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginAttrPlot.html">NDPluginAttrPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginAttribute.html">NDPluginAttribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginCircularBuff.html">NDPluginCircularBuff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginCodec.html">NDPluginCodec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginColorConvert.html">NDPluginColorConvert</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginFFT.html">NDPluginFFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginFile.html">NDPluginFile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginGather.html">NDPluginGather</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginOverlay.html">NDPluginOverlay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginProcess.html">NDPluginProcess</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginPva.html">NDPluginPva</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginROI.html">NDPluginROI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginROIStat.html">NDPluginROIStat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginScatter.html">NDPluginScatter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginStats.html">NDPluginStats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginStdArrays.html">NDPluginStdArrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginTimeSeries.html">NDPluginTimeSeries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginTransform.html">NDPluginTransform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/NDPluginPos.html">NDPosPlugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADCore/ffmpegServer.html">ffmpegServer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ADCore/medm.html">MEDM screens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ADViewers/ad_viewers.html">areaDetector Viewers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-viewers">ImageJ Viewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-controller-epics-ad-controller-java">ImageJ Controller (EPICS_AD_Controller.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#imagej-gaussian-profiler-gaussianprofiler-java">ImageJ Gaussian Profiler (GaussianProfiler.java)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#idl-viewer">IDL Viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ADViewers/ad_viewers.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../acknowledgements.html">Acknowledgements and licenses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">Source Code Documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Point Grey areaDetector driver</a><ul>
<li><a class="reference internal" href="#table-of-contents">Table of Contents</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#camera-firmware">Camera firmware</a></li>
<li><a class="reference internal" href="#video-modes">Video modes</a></li>
<li><a class="reference internal" href="#format7-modes">Format7 modes</a></li>
<li><a class="reference internal" href="#pixel-formats">Pixel formats</a></li>
<li><a class="reference internal" href="#frame-rates">Frame rates</a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#gige-properties">GigE Properties</a></li>
<li><a class="reference internal" href="#standard-areadetector-parameters">Standard areaDetector parameters</a></li>
<li><a class="reference internal" href="#point-grey-specific-driver-parameters">Point Grey specific driver parameters</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#medm-screens">MEDM screens</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../ADProsilica/st_cmd.html" title="Previous Chapter: Example st.cmd Startup File"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Example st.cm...</span>
    </a>
  </li>
  <li>
    <a href="../ADCore/plugins.html" title="Next Chapter: areaDetector Plugins"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">areaDetector Plugins &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/ADPointGrey/PointGreyDoc.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="point-grey-areadetector-driver">
<h1>Point Grey areaDetector driver<a class="headerlink" href="#point-grey-areadetector-driver" title="Permalink to this headline">¶</a></h1>
<div style="text-align: center"><p class="rubric" id="id1">Point Grey areaDetector driver</p>
<p class="rubric" id="july-21-2017">July 21, 2017</p>
<p class="rubric" id="mark-rivers">Mark Rivers</p>
<p class="rubric" id="university-of-chicago">University of Chicago</p>
</div><div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="#Introduction">Introduction</a></li>
<li><a class="reference external" href="#Firmware">Camera firmware</a></li>
<li><a class="reference external" href="#VideoModes">Video modes</a></li>
<li><a class="reference external" href="#Format7Modes">Format7 modes</a></li>
<li><a class="reference external" href="#PixelFormats">Pixel formats</a></li>
<li><a class="reference external" href="#FrameRates">Frame rates</a></li>
<li><a class="reference external" href="#Properties">Properties</a></li>
<li><a class="reference external" href="#StandardParameters">Standard driver parameters</a></li>
<li><a class="reference external" href="#DriverParameters">Point Grey specific driver parameters</a></li>
<li><a class="reference external" href="#Configuration">Configuration</a></li>
<li><a class="reference external" href="#MEDM_screens">MEDM screens</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This is an <a class="reference external" href="http://www.aps.anl.gov/epics/">EPICS</a>
<a class="reference external" href="areaDetector.html">areaDetector</a> driver for cameras from <a class="reference external" href="http://www.ptgrey.com">Point
Grey</a>. These include IEEE 1394 Firewire DCAM,
GigE, USB 2.0, and USB 3.0 cameras. The driver should work with any
Point Grey camera. It has been tested on Firewire (Flea2), GigE
(BlackFly, Flea3, Grasshopper3), and USB 3.0 (Grasshopper3) cameras. The
driver has been tested on Windows and Linux with all 3 of these cameras.
Note that Point Grey Firewire cameras can also be controlled by the
generic areaDetector <a class="reference external" href="FirewireWinDoc.html">Windows Firewire driver</a>
and the areaDetector <a class="reference external" href="http://controls.diamond.ac.uk/downloads/support/firewireDCAM/index.html">Linux Firewire
driver</a>,
which work with Firewire cameras from any vendor. However, this Point
Grey driver provides access to some vendor-specific features like strobe
outputs that are not available in the generic drivers.</p>
<p>On Linux the Point Grey FlyCap2 SDK requires glibc version 2.14. This
means it cannot be used on RHEL 6, but it can be used on RHEL 7, and
Fedora 15 and higher. For USB 3.0 cameras kernel version 3.5.0 or higher
is required. This means USB 3.0 cameras require Fedora 18 or higher, or
RHEL 7.0 or higher.</p>
<p>This driver inherits from <a class="reference external" href="areaDetectorDoc.html#ADDriver">ADDriver</a>.
It implements many of the parameters in
<a class="reference external" href="areaDetectorDoxygenHTML/asyn_n_d_array_driver_8h.html">asynNDArrayDriver.h</a>
and in
<a class="reference external" href="areaDetectorDoxygenHTML/_a_d_driver_8h.html">ADArrayDriver.h</a>. It
also implements a number of parameters that are specific to the Point
Grey cameras. The <a class="reference external" href="areaDetectorDoxygenHTML/classpoint_grey.html">pointGrey class
documentation</a>
describes this class in detail.</p>
<p>The Point Grey cameras use the <a class="reference external" href="http://damien.douxchamps.net/ieee1394/libdc1394/iidc/">IIDC/DCAM
model</a> for
controlling features like shutter time, white balance, frame sizes,
shutter time, frame rates, etc. This model is used not only for the IEEE
1394 Firewire cameras, for which the IIDC/DCAM model was developed, but
also for their USB and GigE cameras. The Point Grey driver thus has many
similarities to the generic areaDetector <a class="reference external" href="FirewireWinDoc.html">Windows Firewire
driver</a> and the areaDetector <a class="reference external" href="http://controls.diamond.ac.uk/downloads/support/firewireDCAM/index.html">Linux Firewire
driver</a>.
The FlyCapture2 SDK abstracts this model to a certain extent, which
facilitates writing a driver that works with all of the Point Grey
cameras.</p>
</div>
<div class="section" id="camera-firmware">
<h2>Camera firmware<a class="headerlink" href="#camera-firmware" title="Permalink to this headline">¶</a></h2>
<p>Point Grey frequently updates the available firmware for each camera to
add features and fix bugs. However, they are not very good about putting
the link to the latest firmware on their Web site. They claim this is
because they only put the firmware on the Web site once it has been
tested on all camera models in the camera family on which that firmware
runs. In practice the firmware version listed on the Web site is often
old and buggy. I have encouraged them to make the latest firmware more
easily available. At present one must e-mail the support team
(<a class="reference external" href="mailto:support&#37;&#52;&#48;ptgrey&#46;com">support<span>&#64;</span>ptgrey<span>&#46;</span>com</a>) and ask them if newer firmware is available for a
particular camera, and if so to provide access to it. They normally do
this by sending a link to a Dropbox folder.</p>
</div>
<div class="section" id="video-modes">
<h2>Video modes<a class="headerlink" href="#video-modes" title="Permalink to this headline">¶</a></h2>
<p>The DCAM specification defines standard video formats, and a set of
video modes for each video format. Point Grey combines the video format
and video mode into a single quantity they call VideoMode. The following
table lists these standard video modes.</p>
<p>Video mode Format7 is special. It allows defining an ROI on the camera
to read out. The pixel resolution with which the size and position of
this ROI can be defined can be queried, and is not necessarily a single
pixel. In Format 7 the frame rate settings do not apply, and there is a
another setting called PixelFormat that controls the video format, e.g.
Mono8, Mono16, RGB8, etc.</p>
<p>Most cameras only support a small subset of these standard modes. The
EPICS record $(P)$(R)VideoMode is an mbbo record that only has choices
for the video modes actually available on the specific camera in use.
Since mbbo records only allow a maximum of 16 choices and there are 24
standard video modes, it is conceivable that all available videos modes
would not be presented. In practice this is not a problem since no
existing camera supports more than 16 video modes.</p>
<p><strong>Point Grey Video Modes</strong></p>
<p>Mode Number</p>
<p>Mode Description</p>
<p>0</p>
<p>160x120 YUV444</p>
<p>1</p>
<p>320x240 YUV422</p>
<p>2</p>
<p>640x480 YUV411</p>
<p>3</p>
<p>640X480 YUV422</p>
<p>4</p>
<p>640x480 RGB</p>
<p>5</p>
<p>640x480 Mono8</p>
<p>6</p>
<p>640x480 Mono16</p>
<p>7</p>
<p>800x600 YUV422</p>
<p>8</p>
<p>800x600 RGB</p>
<p>9</p>
<p>800x600 Mono8</p>
<p>10</p>
<p>1024x768 YUV422</p>
<p>11</p>
<p>1024x768 RGB</p>
<p>12</p>
<p>1024x768 Mono8</p>
<p>13</p>
<p>800x600 Mono16</p>
<p>14</p>
<p>1024x768 Mono16</p>
<p>15</p>
<p>1280x960 YUV422</p>
<p>16</p>
<p>1280x960 RGB</p>
<p>17</p>
<p>1280x960 Mono8</p>
<p>18</p>
<p>1600x1200 YUV422</p>
<p>19</p>
<p>1600x1200 RGB</p>
<p>20</p>
<p>1600x1200 Mono8</p>
<p>21</p>
<p>1280x960 Mono16</p>
<p>22</p>
<p>1600x1200 Mono16</p>
<p>23</p>
<p>Format7 (user-defined)</p>
</div>
<div class="section" id="format7-modes">
<h2>Format7 modes<a class="headerlink" href="#format7-modes" title="Permalink to this headline">¶</a></h2>
<p>When the video mode is Format7 then there is an available selection of
Format7 modes. These modes are not defined in the IIDC/DCAM standard,
but are specific to each vendor and camera. Typically Format7 mode 0 is
the entire chip unbinned, and mode 1 is often the entire chip with 2x2
binning. The supported Format7 modes are listed in the Point Grey
Technical Reference Manual for each camera. The EPICS Format7Mode record
is used to select the Format7 mode to use. This is an mbbo record and
the enum choices are only those supported by the camera in use. The enum
strings are of the form “Format7 mode # (NYxNY)”, for example “0
(1920x1200)” or “1 (960x600)” for Format7 modes 0 and 1 respectively on
a camera with 1920 x 1200 pixels.</p>
</div>
<div class="section" id="pixel-formats">
<h2>Pixel formats<a class="headerlink" href="#pixel-formats" title="Permalink to this headline">¶</a></h2>
<p>When the video mode is Format7 then there is an available selection of
PixelFormats. The available PixelFormats depend on the selected Format7
mode. Selection of a PixelFormat is done with the EPICS PixelFormat
record. This is an mbbo record that only has choices that are valid for
the currently selected Format7 mode. The enum values in this record are
thus dynamic, and it is displayed in a separate GUI window that must be
closed and re-opened when the Format7 mode changes in order to guarantee
that it is displaying the currently valid PixelFormat choices.</p>
<p>The following tables lists the standard pixel formats for video mode
Format7. Note that typically only a few of these pixel formats are
supported on a particular camera with a specific Format7 mode.</p>
<p><strong>Point Grey Format7 Pixel Formats</strong></p>
<p>Pixel Format Number</p>
<p>Pixel Format Description</p>
<p>0</p>
<p>Mono8</p>
<p>1</p>
<p>YUV411</p>
<p>2</p>
<p>YUV422</p>
<p>3</p>
<p>YUV444</p>
<p>4</p>
<p>RGB8</p>
<p>5</p>
<p>Mono16</p>
<p>6</p>
<p>RGB16</p>
<p>7</p>
<p>Mono16_Signed</p>
<p>8</p>
<p>RGB16_Signed</p>
<p>9</p>
<p>Raw8</p>
<p>10</p>
<p>Raw16</p>
<p>11</p>
<p>Mono12</p>
<p>12</p>
<p>Raw12</p>
<p>13</p>
<p>BGR</p>
<p>14</p>
<p>BGRU</p>
<p>15</p>
<p>BGR16</p>
<p>16</p>
<p>BGRU16</p>
<p>17</p>
<p>YUV422_JPEG</p>
</div>
<div class="section" id="frame-rates">
<h2>Frame rates<a class="headerlink" href="#frame-rates" title="Permalink to this headline">¶</a></h2>
<p>The following tables lists the standard IIDC/DCAM frame rates for video
modes other than Format7. Selecting a video mode (other than Format7)
defines the choice of available standard frame rates. Selecting a
standard frame rate actually defines a range of frame rates that are
available, and the actual frame rate can be adjusted within this range
with the FrameRate property. The FrameRate property is controlled with
the EPICS FrameRateAbsVal or AcquirePeriod records.</p>
<p>Selection of a standard frame rate is done with the EPICS FrameRate
record. This is an mbbo record that only has choices that are valid for
the currently selected video mode. The enum values in this record are
thus dynamic, and it is displayed in a separate GUI window that must be
closed and re-opened when the video mode changes in order to guarantee
that it is displaying the currently valid FrameRate choices. Note that
not all frame rates are supported by the IIDC standard for every video
mode, and even when a frame rate is supported by the standard it may not
be implemented for a particular camera.</p>
<p>In Format 7 the frame rate settings do not apply, and the frame rate is
controlled solely by the FrameRate property.</p>
<p><strong>Standard IIDC/DCAM Video Frame Rates</strong></p>
<p>Frame Rate Number</p>
<p>Frame Rate (Frames/second)</p>
<p>0</p>
<p>1.875</p>
<p>1</p>
<p>3.75</p>
<p>2</p>
<p>7.5</p>
<p>3</p>
<p>15</p>
<p>4</p>
<p>30</p>
<p>5</p>
<p>60</p>
<p>6</p>
<p>120</p>
<p>7</p>
<p>240</p>
</div>
<div class="section" id="properties">
<h2>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<p>The DCAM specification defines a number of standard features, which
control things such as the brightness, white balance, shutter time, etc.
For each feature the standard defines control in both device units
(12-bit integers) and absolute units (floating point). For example
shutter time may support absolute seconds, as well as device units. A
feature may or may not be supported on a particular camera. If it is
supported it may or may not permit control in absolute units. Each
feature may support both manual control and automatic control (e.g.
automatic gain control).</p>
<p>Point Grey supports 18 of these DCAM features, which they call
Properties.</p>
<p><strong>Point Grey Camera Properties</strong></p>
<p>Property Number</p>
<p>EPICS Record Base Name</p>
<p>Point Grey PropertyType enum</p>
<p>0</p>
<p>Brightness</p>
<p>BRIGHTNESS</p>
<p>1</p>
<p>AutoExposure</p>
<p>AUTO_EXPOSURE</p>
<p>2</p>
<p>Sharpness</p>
<p>SHARPNESS</p>
<p>3</p>
<p>WhiteBalance</p>
<p>WHITE_BALANCE</p>
<p>4</p>
<p>Hue</p>
<p>HUE</p>
<p>5</p>
<p>Saturation =</p>
<p>SATURATION</p>
<p>6</p>
<p>Gamma</p>
<p>GAMMA</p>
<p>7</p>
<p>Iris</p>
<p>IRIS</p>
<p>8</p>
<p>Focus</p>
<p>FOCUS</p>
<p>9</p>
<p>Zoom</p>
<p>ZOOM</p>
<p>10</p>
<p>Pan</p>
<p>PAN</p>
<p>11</p>
<p>Tilt</p>
<p>TILT</p>
<p>12</p>
<p>Shutter</p>
<p>SHUTTER</p>
<p>13</p>
<p>Gain</p>
<p>GAIN</p>
<p>14</p>
<p>TriggerMode</p>
<p>TRIGGER_MODE</p>
<p>15</p>
<p>TriggerDelay</p>
<p>TRIGGER_DELAY</p>
<p>16</p>
<p>FrameRate</p>
<p>FRAME_RATE</p>
<p>17</p>
<p>Temperature</p>
<p>TEMPERATURE</p>
</div>
<div class="section" id="gige-properties">
<h2>GigE Properties<a class="headerlink" href="#gige-properties" title="Permalink to this headline">¶</a></h2>
<p>Point Grey supports 4 properties that are specific to GigE cameras.</p>
<p><strong>Point Grey Camera Properties</strong></p>
<p>Property Number</p>
<p>EPICS Record Base Name</p>
<p>Point Grey PropertyType enum</p>
<p>0</p>
<p>Heeartbeat</p>
<p>HEARTBEAT</p>
<p>1</p>
<p>HeartbeatTimeout</p>
<p>HEARTBEAT_TIMEOUT</p>
<p>2</p>
<p>PacketSize</p>
<p>PACKET_SIZE</p>
<p>3</p>
<p>PacketDelay</p>
<p>PACKET_DELAY</p>
</div>
<div class="section" id="standard-areadetector-parameters">
<h2>Standard areaDetector parameters<a class="headerlink" href="#standard-areadetector-parameters" title="Permalink to this headline">¶</a></h2>
<p>The following table describes how the Point Grey driver implements some
of the standard driver parameters.</p>
<p><strong>Implementation of Parameters in asynNDArrayDriver.h and ADDriver.h,
and EPICS Record Definitions in ADBase.template and NDFile.template</strong></p>
<p>Parameter index variable</p>
<p>EPICS record name</p>
<p>Description</p>
<p>ADTriggerMode</p>
<p>$(P)$(R)TriggerMode</p>
<p>The choices for the Point Grey are:</p>
<ul class="simple">
<li>“Internal”. The timing is internal to the detector.</li>
<li>“Ext. standard”. Each external trigger pulse starts the next image.
The exposure time is controlled internally by the AcquireTime record.</li>
<li>“Bulb”. The rising edge of the external trigger signal starts the
next image. The detector continues to acquire while the external
signal is high, and then reads out the detector on the falling edge
of the external trigger signal.</li>
<li>“Skip frames”. One external trigger pulse starts an image and then
the next N external trigger signals are ignored. The SkipFrames
record defines N.</li>
<li>“Multi-exposure”. One external trigger pulse starts an image and then
the next N-1 external trigger signals cause an additional exposure
into the same image. The image is read out after trigger N. The
NumExposures record defines N.</li>
<li>“Multi-exposure bulb”. A combination of bulb and multi-exposure modes
above. N exposures are accumulated into an image before it is read
out. The time in the logic high state determines the acquire time for
each exposure. The NumExposures record defines N.</li>
<li>“Low-smear”. Smear reduction works by increasing the speed of the
vertical clock near the end of the integration cycle. See the
Technical Reference Manual for the camera for more information.</li>
<li>“Multi-shot”. A single external trigger causes N images to be
acquired. The NumImages record defines N. NumImages is limited to a
maximum 255 in this mode.</li>
</ul>
<p>Note that the minimum time between external trigger pulses is no more
than the maximum value of FrameRate in the current mode, and may be less
for a particular camera. Note also that not all cameras support all
TriggerModes. The TriggerMode enum string choices are only those
supported for the camera in use.</p>
<p>ADTemperatureActual</p>
<p>$(P)$(R)TemperatureActual</p>
<p>The readback of the temperature.</p>
<p>ADNumImages</p>
<p>$(P)$(R)NumImages</p>
<p>Controls the number of images to acquire. When TriggerMode=Internal this
is handled in software. When TriggerMode=Multi-shot it is handled in the
camera firmware.</p>
<p>ADNumExposures</p>
<p>$(P)$(R)NumExposures</p>
<p>Controls the number of exposures per image when
TriggerMode=”Multi-exposure” or “Multi-exposure bulb”.</p>
<p>ADAcquireTime</p>
<p>$(P)$(R)AcquireTime</p>
<p>Controls the acquisition time per image. This is converted into the
ShutterAbsVal control of the SHUTTER property. ShutterAbsVal =
AcquireTime*1000., because SHUTTER units are ms.</p>
<p>ADAcquirePeriod</p>
<p>$(P)$(R)AcquirePeriod</p>
<p>Controls the period between images. This is converted into the
FrameRateAbsVal control of the FRAME_RATE property. FrameRateAbsVal =
1./AcquirePeriod.</p>
<p>ADGain</p>
<p>$(P)$(R)Gain</p>
<p>Controls the analog gain on the camera. This is converted into the
GainAbsVal control of the GAIN property. The units are dB.</p>
</div>
<div class="section" id="point-grey-specific-driver-parameters">
<h2>Point Grey specific driver parameters<a class="headerlink" href="#point-grey-specific-driver-parameters" title="Permalink to this headline">¶</a></h2>
<p>The Point Grey driver implements the following parameters in addition to
those in asynNDArrayDriver.h and ADDriver.h. The database file is
pointGrey.template for all records except the property records, which
are in pointGreyProperty.template.</p>
<p><strong>Parameter Definitions in firewireWinDCAM.cpp and EPICS Record
Definitions</strong></p>
<p>Parameter index variable</p>
<p>asyn interface</p>
<p>Access</p>
<p>Description</p>
<p>drvInfo string</p>
<p>EPICS record name</p>
<p>EPICS record type</p>
<p><strong>Video mode parameters</strong></p>
<p>PGVideoMode</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The video mode. All possible values are listed in the <a class="reference external" href="#VideoModes">Video
modes</a> section above. The actual enum choices for this
record will only include the video modes supported by the camera in use.</p>
<p>PG_VIDEO_MODE</p>
<div class="line-block">
<div class="line">$(P)$(R)VideoMode</div>
<div class="line">$(P)$(R)VideoMode_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p>PGFormat7Mode</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The Format7 mode when the camera is in VideoMode=Format7. This is
discussed in the <a class="reference external" href="#Format7Modes">Format7 modes</a> section above. The
actual enum choices for this record will only include the Format7 modes
supported by the camera in use.</p>
<p>PG_FORMAT7_MODE</p>
<div class="line-block">
<div class="line">$(P)$(R)Format7Mode</div>
<div class="line">$(P)$(R)Format7Mode_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p>PGPixelFormat</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The pixel format when the camera is in VideoMode=Format7. This is
discussed in the <a class="reference external" href="#PixelFormats">Pixel formats</a> section above. The
actual enum choices for this record will only include the pixel formats
supported by the camera in use for the Format7Mode currently selected.</p>
<p>PG_PIXEL_FORMAT</p>
<div class="line-block">
<div class="line">$(P)$(R)PixelFormat</div>
<div class="line">$(P)$(R)PixelFormat_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p>PGConvertPixelFormat</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The driver allows converting the pixel format from the camera to another
pixel format. The pixel formats from the camera that can be converted
are:</p>
<ul class="simple">
<li>Raw8</li>
<li>Raw12</li>
<li>Raw16</li>
<li>Mono12</li>
</ul>
<p>The pixel format that these can be converted to are:</p>
<ul class="simple">
<li>None: The input pixel format is not converted.</li>
<li>Mono8: The input pixel format is converted to Mono8.</li>
<li>Raw16: The input pixel format is converted to Raw16. This is useful
when the input pixel format is Raw12, since this saves network
bandwidth.</li>
<li>Mono16: The input pixel format is converted to Mono16. This is useful
when the input pixel format is Mono12, since this saves network
bandwidth. Note that the FlyCap2 library does not support converting
Raw12 to Mono16. The difference between Raw16 and Mono16 is that
Mono16 has the sharpness and gamma corrections applied, while Raw16
does not.</li>
<li>RGB8: The input format is converted to RGB8. This is useful when the
input format is Raw8, for a color camera. In this case Bayer color is
sent on the network, reducing the bandwidth requirement by a factor
of 3.</li>
<li>RGB16: The input format is converted to RGB16. This is useful when
the input format is Raw16, for a color camera. In this case Bayer
color is sent on the network, reducing the bandwidth requirement by a
factor of 3.</li>
</ul>
<p>PG_CONVERT_PIXEL_FORMAT</p>
<div class="line-block">
<div class="line">$(P)$(R)ConvertPixelFormat</div>
<div class="line">$(P)$(R)ConvertPixelFormat_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p>PGFrameRate</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The frame rate choice when the VideoMode is not Format7. This is
discussed in the <a class="reference external" href="#FrameRates">Frame rates</a> section above. The actual
enum choices for this record will only include the frame rates supported
by the camera in use for the VideoMode currently selected.</p>
<p>PG_FRAME_RATE</p>
<div class="line-block">
<div class="line">$(P)$(R)FrameRate</div>
<div class="line">$(P)$(R)FrameRate_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p>BinningMode</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The binning mode for GigE cameras. The allowed values are
camera-specific.</p>
<p>PG_BINNING_MODE</p>
<div class="line-block">
<div class="line">$(P)$(R)BinningMode</div>
<div class="line">$(P)$(R)BinningMode_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p><strong>Property parameters
These parameters apply to each of the 18 Point Grey properties discussed
in the `Properties &lt;#Properties&gt;`__ section above.
The $(PROPERTY) macro in this table is the EPICS record base name listed
in that section.
These records are defined in pointGreyProperty.template.</strong></p>
<p>PGPropertyAvail</p>
<p>asynInt32</p>
<p>r/o</p>
<p>A flag indicating if the property is available.</p>
<p>PG_PROP_AVAIL</p>
<p>$(P)$(R)$(PROPERTY)Avail</p>
<p>bi</p>
<p>PGPropertyOnOffAvail</p>
<p>asynInt32</p>
<p>r/o</p>
<p>A flag indicating if the property supports turning on and off.</p>
<p>PG_PROP_ON_OFF_AVAIL</p>
<p>$(P)$(R)$(PROPERTY)OnOffAvail</p>
<p>bi</p>
<p>PGPropertyOnOff</p>
<p>asynInt32</p>
<p>r/w</p>
<p>Controls whether the property is on or off.</p>
<p>PG_PROP_ON_OFF</p>
<div class="line-block">
<div class="line">$(P)$(R)$(PROPERTY)OnOff</div>
<div class="line">$(P)$(R)$(PROPERTY)OnOff_RBV</div>
</div>
<div class="line-block">
<div class="line">bo</div>
<div class="line">bi</div>
</div>
<p>PGPropertyOnePushAvail</p>
<p>asynInt32</p>
<p>r/o</p>
<p>A flag indicating if the property supports setting once (called One
Push). This is typically used for setting things like the gain or
shutter time automatically once.</p>
<p>PG_PROP_ONE_PUSH_AVAIL</p>
<p>$(P)$(R)$(PROPERTY)OnePushAvail</p>
<p>bi</p>
<p>PGPropertyOnePush</p>
<p>asynInt32</p>
<p>r/w</p>
<p>Processing this record causes a one-push setting of the property.</p>
<p>PG_PROP_ONE_PUSH</p>
<p>$(P)$(R)$(PROPERTY)OnePush</p>
<p>bo</p>
<p>PGPropertyAbsAvail</p>
<p>asynInt32</p>
<p>r/o</p>
<p>A flag indicating if the property supports absolute (floating point)
control.</p>
<p>PG_PROP_ABS_AVAIL</p>
<p>$(P)$(R)$(PROPERTY)AbsAvail</p>
<p>bi</p>
<p>PGPropertyAutoAvail</p>
<p>asynInt32</p>
<p>r/o</p>
<p>A flag indicating if the property supports automatic control.</p>
<p>PG_PROP_AUTO_AVAIL</p>
<p>$(P)$(R)$(PROPERTY)AutoAvail</p>
<p>bi</p>
<p>PGPropertyManAvail</p>
<p>asynInt32</p>
<p>r/o</p>
<p>A flag indicating if the property supports manual control.</p>
<p>PG_PROP_MAN_AVAIL</p>
<p>$(P)$(R)$(PROPERTY)ManAvail</p>
<p>bi</p>
<p>PGPropertyAutoMode</p>
<p>asynInt32</p>
<p>r/w</p>
<p>Controls whether the property is manually controlled or automatically
controlled.</p>
<p>PG_PROP_AUTO_MODE</p>
<div class="line-block">
<div class="line">$(P)$(R)$(PROPERTY)AutoMode</div>
<div class="line">$(P)$(R)$(PROPERTY)AutoMode_RBV</div>
</div>
<div class="line-block">
<div class="line">bo</div>
<div class="line">bi</div>
</div>
<p>PGPropertyAbsAvail</p>
<p>asynInt32</p>
<p>r/o</p>
<p>A flag indicating if the property supports absolute (floating point)
control.</p>
<p>PG_PROP_ABS_AVAIL</p>
<p>$(P)$(R)$(PROPERTY)AbsAvail</p>
<p>bi</p>
<p>PGPropertyAbsMode</p>
<p>asynInt32</p>
<p>r/w</p>
<p>Controls whether the property is controlled in integer device units or
floating point absolute units.</p>
<p>PG_PROP_ABS_MODE</p>
<div class="line-block">
<div class="line">$(P)$(R)$(PROPERTY)AbsMode</div>
<div class="line">$(P)$(R)$(PROPERTY)AbsMode_RBV</div>
</div>
<div class="line-block">
<div class="line">bo</div>
<div class="line">bi</div>
</div>
<p>PGPropertyValue</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The value of the property in integer device units. This controls the
ValueA field of the property, which is the only integer field used for
all properties except WHITE_BALANCE.</p>
<p>PG_PROP_VAL</p>
<div class="line-block">
<div class="line">$(P)$(R)$(PROPERTY)Val</div>
<div class="line">$(P)$(R)$(PROPERTY)Val_RBV</div>
</div>
<div class="line-block">
<div class="line">ao</div>
<div class="line">ai</div>
</div>
<p>PGPropertyValueB</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The value of the property in integer device units. This controls the
ValueB field of the property, which is only used to control the Blue
value of WHITE_BALANCE.</p>
<p>PG_PROP_VAL_B</p>
<div class="line-block">
<div class="line">$(P)$(R)$(PROPERTY)ValB</div>
<div class="line">$(P)$(R)$(PROPERTY)ValB_RBV</div>
</div>
<div class="line-block">
<div class="line">ao</div>
<div class="line">ai</div>
</div>
<p>PGPropertyValueMin</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The minimum value of the property in device units. This is used to
control the LOPR and DRVL fields of the $(P)$(R)$(PROPERTY)Val record.</p>
<p>PG_PROP_VAL_MIN</p>
<p>$(P)$(R)$(PROPERTY)ValMin</p>
<p>ai</p>
<p>PGPropertyValueMax</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The maximum value of the property in device units. This is used to
control the HOPR and DRVH fields of the $(P)$(R)$(PROPERTY)Val record.</p>
<p>PG_PROP_VAL_MAX</p>
<p>$(P)$(R)$(PROPERTY)ValMax</p>
<p>ai</p>
<p>PGPropertyValueAbs</p>
<p>asynFloat64</p>
<p>r/w</p>
<p>The value of the property in floating point absolute units.</p>
<p>PG_PROP_VAL_ABS</p>
<div class="line-block">
<div class="line">$(P)$(R)$(PROPERTY)ValAbs</div>
<div class="line">$(P)$(R)$(PROPERTY)ValAbs_RBV</div>
</div>
<div class="line-block">
<div class="line">ao</div>
<div class="line">ai</div>
</div>
<p>PGPropertyValueAbsMin</p>
<p>asynFloat64</p>
<p>r/o</p>
<p>The minimum value of the property in absolute units. This is used to
control the LOPR and DRVL fields of the $(P)$(R)$(PROPERTY)ValAbs
record.</p>
<p>PG_PROP_VAL_ABS_MIN</p>
<p>$(P)$(R)$(PROPERTY)ValAbsMin</p>
<p>ai</p>
<p>PGPropertyValueAbsMax</p>
<p>asynFloat64</p>
<p>r/o</p>
<p>The maximum value of the property in absolute units. This is used to
control the HOPR and DRVH fields of the $(P)$(R)$(PROPERTY)ValAbs
record.</p>
<p>PG_PROP_VAL_ABS_MAX</p>
<p>$(P)$(R)$(PROPERTY)ValAbsMax</p>
<p>ai</p>
<p><strong>GigE Property parameters
These parameters apply to each of the 4 Point Grey GigE properties
discussed in the `GigE Properties &lt;#GigEProperties&gt;`__ section above.
The $(PROPERTY) macro in this table is the EPICS record base name listed
in that section.
These records are defined in pointGreyProperty.template.</strong></p>
<p>PGPropertyValue</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The value of the property in integer device units. This controls the
ValueA field of the property, which is the only integer field used for
all properties except WHITE_BALANCE.</p>
<p>PG_PROP_VAL</p>
<div class="line-block">
<div class="line">$(P)$(R)$(PROPERTY)Val</div>
<div class="line">$(P)$(R)$(PROPERTY)Val_RBV</div>
</div>
<div class="line-block">
<div class="line">ao</div>
<div class="line">ai</div>
</div>
<p>PGPropertyValueMin</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The minimum value of the property in device units. This is used to
control the LOPR and DRVL fields of the $(P)$(R)$(PROPERTY)Val record.</p>
<p>PG_PROP_VAL_MIN</p>
<p>$(P)$(R)$(PROPERTY)ValMin</p>
<p>ai</p>
<p>PGPropertyValueMax</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The maximum value of the property in device units. This is used to
control the HOPR and DRVH fields of the $(P)$(R)$(PROPERTY)Val record.</p>
<p>PG_PROP_VAL_MAX</p>
<p>$(P)$(R)$(PROPERTY)ValMax</p>
<p>ai</p>
<p><strong>Trigger parameters</strong></p>
<p>PGTriggerSource</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The trigger source signal. Choices are “GPIO_0”, GPIO_1”,”GPIO_2”,
and “GPIO_3”, which selects one of 4 GPIO pins on the camera. However,
not all choices may be available on a specific camera, and the enum
choices will only be the trigger sources actually supported on the
camera in use.</p>
<p>PG_TRIGGER_SOURCE</p>
<div class="line-block">
<div class="line">$(P)$(R)TriggerSource</div>
<div class="line">$(P)$(R)TriggerSource_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p>PGTriggerPolarity</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The trigger polarity. Choices are “Low”, and “High”.</p>
<p>PG_TRIGGER_POLARITY</p>
<div class="line-block">
<div class="line">$(P)$(R)TriggerPolarity</div>
<div class="line">$(P)$(R)TriggerPolarity_RBV</div>
</div>
<div class="line-block">
<div class="line">bo</div>
<div class="line">bi</div>
</div>
<p>PGSoftwareTrigger</p>
<p>asynInt32</p>
<p>r/w</p>
<p>Processing this record causes the driver to issue a software trigger.</p>
<p>PG_SOFTWARE_TRIGGER</p>
<p>$(P)$(R)SoftwareTrigger</p>
<p>bo</p>
<p>PGSkipFrames</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The number of frames to skip when TriggerMode=”Skip frames”.</p>
<p>PG_SKIP_FRAMES</p>
<div class="line-block">
<div class="line">$(P)$(R)SkipFrames</div>
<div class="line">$(P)$(R)SkipFrames_RBV</div>
</div>
<div class="line-block">
<div class="line">longout</div>
<div class="line">longin</div>
</div>
<p><strong>Strobe parameters</strong></p>
<p>PGStrobeSource</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The strobe output signal. Choices are “GPIO_0”, GPIO_1”,”GPIO_2”, and
“GPIO_3”, which selects one of 4 GPIO pins on the camera. However, not
all choices may be available on a specific camera, and the enum choices
will only be the strobe sources actually supported on the camera in use.</p>
<p>PG_STROBE_SOURCE</p>
<div class="line-block">
<div class="line">$(P)$(R)StrobeSource</div>
<div class="line">$(P)$(R)StrobeSource_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p>PGStrobeEnable</p>
<p>asynInt32</p>
<p>r/w</p>
<p>Enables the strobe output. Choices are “Disable”, and “Enable”.</p>
<p>PG_STROBE_ENABLE</p>
<div class="line-block">
<div class="line">$(P)$(R)StrobeEnable</div>
<div class="line">$(P)$(R)StrobeEnable_RBV</div>
</div>
<div class="line-block">
<div class="line">bo</div>
<div class="line">bi</div>
</div>
<p>PGStrobePolarity</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The strobe polarity. Choices are “Low”, and “High”.</p>
<p>PG_STROBE_POLARITY</p>
<div class="line-block">
<div class="line">$(P)$(R)StrobePolarity</div>
<div class="line">$(P)$(R)StrobePolarity_RBV</div>
</div>
<div class="line-block">
<div class="line">bo</div>
<div class="line">bi</div>
</div>
<p>PGStrobeDelay</p>
<p>asynFloat64</p>
<p>r/w</p>
<p>The delay of the strobe signal relative to the start of acquisition.</p>
<p>PG_STROBE_DELAY</p>
<div class="line-block">
<div class="line">$(P)$(R)StrobeDelay</div>
<div class="line">$(P)$(R)StrobeDelay_RBV</div>
</div>
<div class="line-block">
<div class="line">ao</div>
<div class="line">ai</div>
</div>
<p>PGStrobeDuration</p>
<p>asynFloat64</p>
<p>r/w</p>
<p>The duration of the strobe signal. If zero then the strobe output is
asserted during the image aquisition time.</p>
<p>PG_STROBE_DURATION</p>
<div class="line-block">
<div class="line">$(P)$(R)StrobeDuration</div>
<div class="line">$(P)$(R)StrobeDuration_RBV</div>
</div>
<div class="line-block">
<div class="line">ao</div>
<div class="line">ai</div>
</div>
<p><strong>Bandwidth control parameters</strong></p>
<p>PGMaxPacketSize</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The maximum packet size. This depends on the current acquisition
settings for Firewire and USB cameras. For GigE cameras this is
determined by calling DiscoverGigEPacketSize at startup, which should
return the maximum Ethernet packet size supported between the camera and
the IOC. However, this sometimes returns 9000 (jumbo packets) when jumbo
packets are not in fact supported. In this case the user should manually
set PacketSize to 1440 or image acquisition will fail.</p>
<p>PG_MAX_PACKET_SIZE</p>
<p>$(P)$(R)MaxPacketSize</p>
<p>longin</p>
<p>PGPacketSize</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The packet size to use. This is used to control the maximum bandwidth,
and hence maximum frame rate, on Firewire and USB cameras. For GigE
cameras it should be set to the largest packet size supported on the
Ethernet connection between the camera and IOC. It should be set to 1440
for connections that do not support jumbo packets, and as large as 9000
for connections that do support jumbo packets. If PacketSize is set to 0
then the driver will use the current value of MaxPacketSize.</p>
<p>PG_PACKET_SIZE</p>
<div class="line-block">
<div class="line">$(P)$(R)PacketSize</div>
<div class="line">$(P)$(R)PacketSize_RBV</div>
</div>
<div class="line-block">
<div class="line">ao</div>
<div class="line">ai</div>
</div>
<p>PGPacketSizeActual</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The actual packet size being used.</p>
<p>PG_PACKET_SIZE_ACTUAL</p>
<p>$(P)$(R)PacketSizeActual</p>
<p>longin</p>
<p>PGPacketDelay</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The packet delay to use in microseconds. This is used to control the
maximum bandwidth, and hence maximum frame rate, on GigE cameras. It is
not used for Firewire or USB cameras. The default is 400 microseconds.
If the number of CorruptFrames is large then this can be increased, for
example to 1000. This will reduce the maximum frame rate but can
significantly reduce the number of CorruptFrames.</p>
<p>PG_PACKET_DELAY</p>
<div class="line-block">
<div class="line">$(P)$(R)PacketDelay</div>
<div class="line">$(P)$(R)PacketDelay_RBV</div>
</div>
<div class="line-block">
<div class="line">longout</div>
<div class="line">longin</div>
</div>
<p>PGPacketDelayActual</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The actual packet delay being used.</p>
<p>PG_PACKET_DELAY_ACTUAL</p>
<p>$(P)$(R)PacketDelayActual</p>
<p>longin</p>
<p>PGBandwidth</p>
<p>asynFloat64</p>
<p>r/o</p>
<p>The calculated bandidth in MB/s. This is computed from the image size
and the frame rate.</p>
<p>PG_BANDWIDTH</p>
<p>$(P)$(R)Bandwidth</p>
<p>ai</p>
<p><strong>Timestamp parameters</strong></p>
<p>PGTimeStampMode</p>
<p>asynInt32</p>
<p>r/w</p>
<p>The timestamp mode. Controls the value of the NDArray,.timeStamp value.
Choices are:</p>
<ul class="simple">
<li>Camera: The time from the camera is used.</li>
<li>EPICS: The EPICS time is used</li>
<li>Hybrid: The EPICS time when the camera started is combined with the
time stamp from the camera.</li>
</ul>
<p>PG_TIME_STAMP_MODE</p>
<div class="line-block">
<div class="line">$(P)$(R)TimeStampMode</div>
<div class="line">$(P)$(R)TimeStampMode_RBV</div>
</div>
<div class="line-block">
<div class="line">mbbo</div>
<div class="line">mbbi</div>
</div>
<p><strong>Camera statistics</strong></p>
<p>PGCorruptFrames</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The number of corrupt frames. The Point Grey SDK resets this to 0 each
time acquisition is started.</p>
<p>PG_CORRUPT_FRAMES</p>
<p>$(P)$(R)CorruptFrames_RBV</p>
<p>longin</p>
<p>PGDroppedFrames</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The number of dropped frames. The Point Grey SDK resets this to 0 each
time acquisition is started.</p>
<p>PG_DROPPED_FRAMES</p>
<p>$(P)$(R)DroppedFrames_RBV</p>
<p>longin</p>
<p>PGDriverDropped</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The number of frames dropped by the driver. The Point Grey SDK resets
this to 0 each time acquisition is started.</p>
<p>PG_DRIVER_DROPPED</p>
<p>$(P)$(R)DriverDropped_RBV</p>
<p>longin</p>
<p>PGTransmitFailed</p>
<p>asynInt32</p>
<p>r/o</p>
<p>The number of time transmission failed. The Point Grey SDK resets this
to 0 each time acquisition is started.</p>
<p>PG_TRANSMIT_FAILED</p>
<p>$(P)$(R)TransmitFailed_RBV</p>
<p>longin</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The Point Grey driver is created with the pointGreyConfig command,
either from C/C++ or from the EPICS IOC shell.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pointGreyConfig(const char *portName, const char* cameraId, int traceMask, int memoryChannel,
              int maxBuffers, size_t maxMemory,
              int priority, int stackSize)
</pre></div>
</div>
<p>The cameraId parameter can either be an index of the camera in the list
of available cameras (e.g. 0 if there is only a single Point Grey camera
available) or the serial number of the camera to use. For additional
details on the meaning of the parameters to this function refer to the
detailed documentation on the pointGreyConfigConfig function in the
<a class="reference external" href="areaDetectorDoxygenHTML/point_grey_8cpp.html">pointGrey.cpp
documentation</a> and in
the documentation for the constructor for the <a class="reference external" href="areaDetectorDoxygenHTML/classpoint_grey.html">pointGrey
class</a>.</p>
<p>The traceMask can be set to a value &gt; 1 to enable asynTrace debugging
during initialization, before the value can be set from the IOC shell or
via the asynRecord. Set this to 0x21 to enable ASYN_TRACE_WARNING,
which will trace all calls to the Point Grey FlyCap2 library.</p>
<p>The memoryChannel can be set to a value &gt; 0 to load the initial camera
parameters from non-volatile memory in the camera. Setting memoryChannel
to N loads from memoryChannel N-1, i.e. 1 loads memory channel 0. There
is currently a problem with Linux and for BlackFly GigE cameras. If the
IOC is run a second time after it has been used to acquire any images
the driver loses communication with the camera. The problem appears to
be that there is a corrupt setting in the camera, which causes it to
malfunction the next time the program is run. Setting memoryChannel 1
will work around this problem by replacing the settings in the camera
with a default set. Since the EPICS IOC sets nearly all the camera
settings to save/restore values at startup anyway, this is not a serious
limitation.</p>
<p>There an example IOC boot directory and startup script
(<a class="reference external" href="point_grey_st_cmd.html">iocBoot/iocPointGrey/st.cmd)</a> provided with
areaDetector.</p>
</div>
<div class="section" id="medm-screens">
<h2>MEDM screens<a class="headerlink" href="#medm-screens" title="Permalink to this headline">¶</a></h2>
<p>The following show the MEDM screens that are used to control the Point
Grey cameras.</p>
<p><code class="docutils literal notranslate"><span class="pre">pointGrey.adl</span></code> is the main screen used to control Point Grey cameras.</p>
<div style="text-align: center"><p class="rubric" id="pointgrey-adl">pointGrey.adl</p>
<p><img alt="pointGrey.png" src="../_images/pointGrey.png" /></p>
</div><p><code class="docutils literal notranslate"><span class="pre">pointGreyProperties.adl</span></code> is the screen used to control the properties
of Point Grey cameras. Note that some of these properties, such as
Shutter, FrameRate, and Gain can also be controlled by standard
areaDetector records, like AcquireTime, AcquirePeriod, and Gain. The
widgets on the medm screen are hidden if the corresponding feature is
not available.</p>
<div style="text-align: center"><p class="rubric" id="pointgreyproperties-adl-for-a-blackfly-gige-color-camera-in-rgb-mode">pointGreyProperties.adl for a BlackFly GigE color camera in
RGB mode</p>
<p><a href="#id2"><span class="problematic" id="id3">|pointGreyProperties\_BlackFly.png|</span></a>
.. rubric:: pointGreyProperties.adl for a Grasshopper3 monochrome camera</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body">pointgreyproperties.adl-for-a-grasshopper3-monochrome-camera</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><a href="#id4"><span class="problematic" id="id5">|pointGreyProperties\_Grasshopper3.png|</span></a></p>
</div><p><code class="docutils literal notranslate"><span class="pre">pointGreyFrameRate.adl</span></code> is the screen used to control the frame rate
in standard video modes. This is a separate screen because the valid
enum strings for the Framerate record can change when the standard video
mode is changed. When that is changed it is necessary to close this
screen and re-open it in order for the new menus to be displayed. This
is a limitation of the EPICS Channel Access which does not send monitor
events for changes in enum fields. Note that the readback of the
FrameRate on the main pointGrey.adl screen can also be incorrect, so it
may be necessary to close and re-open that main screen as well.</p>
<div style="text-align: center"><p class="rubric" id="pointgreyframerate-adl">pointGreyFrameRate.adl</p>
<p><img alt="pointGreyFrameRate.png" src="../_images/pointGreyFrameRate.png" /></p>
</div><p><code class="docutils literal notranslate"><span class="pre">pointGreyPixelFormat.adl</span></code> is the screen used to control the pixel
format in Format7 mode. This is a separate screen because the valid enum
strings for the PixelFormat can change when the Format7 mode is changed.
When that is changed it is necessary to close this screen and re-open it
in order for the new menus to be displayed. This is a limitation of the
EPICS Channel Access which does not send monitor events for changes in
enum fields. Note that the readback of the PixelFormat on the main
pointGrey.adl screen can also be incorrect, so it may be necessary to
close and re-open that main screen as well.</p>
<div style="text-align: center"><p class="rubric" id="pointgreypixelformat-adl">pointGreyPixelFormat.adl</p>
<p><img alt="pointGreyPixelFormat.png" src="../_images/pointGreyPixelFormat.png" /></p>
</div></div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Mark Rivers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>